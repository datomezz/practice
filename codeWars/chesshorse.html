<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Horse</title>
    <style>
        *{
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        .container{
            width : 16rem;
            height : 16rem;
            background : yellow;
            display: flex;
            flex-wrap: wrap;
        }
        .box{
            width: 2rem;
            height: 2rem;
            border: 1px solid #000;
        }
        .white {
            background: white;
        }
        .black {
            background : black;
        }
    </style>
</head>
<body>
    <div class="container"></div>

    <script>
        let container = document.querySelector(".container");
        let box = " ";
        let count = 0;

        let chess = [
            [0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0]
        ];
        function map(){

            for(let x = 0; x < chess.length; x++){
                let arr = chess[x];
                for(let y = 0; y < arr.length; y++){
                    if(count % 2){
                        box += `<div class='box white' data-x="${y}" data-y="${x}"></div>`;
                        count++;
                    }
                    else {
                        box += `<div class='box black' data-x="${y}" data-y="${x}"></div>`;
                        count++;
                    }
                }
                count++;
                container.innerHTML = box;
            }
            let boxPoint = document.querySelectorAll(".box");
            console.log(boxPoint);

            boxPoint.forEach(point => point.addEventListener("click", horse));
        }

        map();

        function horse(){
            
            let boxPoint = document.querySelectorAll(".box");
            boxPoint.forEach(function(item){
                item.style.background = "";
            });
            let x = this.dataset.x;
            let y = this.dataset.y;
            x = Number(x);
            y = Number(y);
            console.log(x , y, this);
            if(x+2 < 8 && y+1 < 8){
                let doc = document.querySelector(`div[data-x="${x+2}"][data-y="${y+1}"]`);
                if(doc != null){
                    doc.style.background = "green";
                }

            }
            if(x+2 < 8 && y-1 >= 0){
                let doc = document.querySelector(`div[data-x="${x+2}"][data-y="${y-1}"]`)   ;
                if(doc != null){
                    doc.style.background = "green";
                }
            }
            if(y+2 < 8 && x+1 >= 0){
                let doc = document.querySelector(`div[data-x="${x+1}"][data-y="${y+2}"]`)   ;
                if(doc != null){
                    doc.style.background = "green";
                }
            }
            if(y+2 < 8 && x-1 >= 0){
                let doc = document.querySelector(`div[data-x="${x-1}"][data-y="${y+2}"]`);
                if(doc != null){
                    doc.style.background = "green";
                }

            }
            if(x-2 < 8 && y+1 >= 0){
                let doc = document.querySelector(`div[data-x="${x-2}"][data-y="${y+1}"]`);
                if(doc != null){
                    doc.style.background = "green";
                }
            }
            if(x-2 < 8 && y-1 >= 0){
                let doc = document.querySelector(`div[data-x="${x-2}"][data-y="${y-1}"]`);
                if(doc != null){
                    doc.style.background = "green";
                }
            }
            if(y-2 < 8 && x-1 >= 0){
                let doc = document.querySelector(`div[data-x="${x-1}"][data-y="${y-2}"]`);
                if(doc != null){
                    doc.style.background = "green";
                }
            }
            if(y-2 < 8 && x+1 >= 0){
                let doc = document.querySelector(`div[data-x="${x+1}"][data-y="${y-2}"]`);
                if(doc != null){
                    doc.style.background = "green";
                }
            }
            this.style.background = "red";
            
        }
    </script>
</body>
</html>